<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>ClipAway</title>
</head>

<script src="js/AudioController.js"></script>
<script src="js/DetectClipping.js"></script>
<script src="js/FFTWrapper.js"></script>
<script src="js/IndexGlobal.js"></script>
<script src="js/Processing/Declip.js"></script>
<script src="js/SignalProcessing.js"></script>
<script src="js/Test.js"></script>
<script src="js/WaveformInteractor.js"></script>
<script src="js/WebAudioUtils.js"></script>

<script src="js/third_party/katspaugh-wavesurfer.js-fdd4b7f/wavesurfer.min.js"></script>
<script src="js/third_party/katspaugh-wavesurfer.js-fdd4b7f/wavesurfer.regions.min.js"></script>
<script src="js/third_party/nayuki-obj/fft.js"></script>
<script src="js/third_party/plotly-latest.min.js"></script>


<body onload="InitIndex();">
  <h1>ClipAway</h1>
  <p>(TODO: Write better words) ClipAway allows you to declip audio. Clipping is a recording artifact
     which occurs when a microphone is recording at a higher sound level. The correct amplitude cannot correctly be represented, and
     instead the recorded amplitude is reduced to a value very near the maximum
     allowed value. The effect produced sounds a lot like distortion, although 
     in this case, it is not pleasant or wanted. One example of a recording 
     scenario where clipping is likely is when recording live concerts through
     mobile phones. </p>
  <p>Click below to chose a file to upload to the website. The file
     will be declipped, and an improved version will be downloaded to your
     computer.</p>

  <input id="audio_input" type="file" accept="audio/*"> </input>

  <div id="original_audio_waveform">Input</div>
  <div id="processed_audio_waveform">Output</div>

  <div id="waveform_interactor_transport">
    <button onclick="waveform_interactor.ToggleActiveWaveSurfer();">Toggle Active Waveform</button>
    <button onclick="waveform_interactor.PlayPausePressed();">Toggle Play/Pause</button>
    <button onclick="waveform_interactor.PlayRegion();">Play Selection</button>
    <button onclick="waveform_interactor.ZoomIn();">Zoom In</button>
    <button onclick="waveform_interactor.ZoomOut();">Zoom Out</button>
  </div>

  <button onclick="ProcessAudio();">Process Audio</button>
  <button onclick="DoDetectClipping();">Detect Clipping</button>

  <div id="plot_div" width=100px height=100px></div>

  <iframe id="my_iframe" style="display:none;">
  <script>
  function Download(url) {
      document.getElementById('my_iframe').src = url;
  };
  </script>

</body>

</html>
